{% extends 'base.html' %}
{% load static %}
{% load index %}
{% block content %}

<link rel="stylesheet" href="{% static 'css/main.css' %}">
<link rel="stylesheet" href="{% static 'css/personal.css' %}">
<link rel="stylesheet" href="{% static 'css/show_certify.css' %}">

<section class="main">
  <div class="main_title">
    <h1 class="text_center">{{ goal.name }}</h1>
    <h3 class="text_center">í•˜ë£¨ {{ goal.goal_page }}í˜ì´ì§€ ë…ì„œí•˜ê¸°</h3>
    <h4 class="text_center">ì°¸ì—¬ì¸ì›: {{ member_count }}</h4>
  </div>

  <ul class="tab_container">
    <li class="tab_item active" data-tab="tab1">
      <a class="tab_item_title" href="#">ë©”ì¸</a>
    </li>
    <li class="tab_item" data-tab="tab2">
      <a class="tab_item_title" href="#">ë‚˜ì˜ ë„ì¥íŒ</a>
    </li>
    <li class="tab_item" data-tab="tab3">
      <a class="tab_item_title" href="#">ì¸ì¦ ì—´ëŒ</a>
    </li>
  </ul>

  <div class="main_container">
    <section class="content-container">
      <article id="tab1" class="content-container__content target goal_check table_container">
        <table>
          <thead>
            <!-- ë‚ ì§œ 1~10ì¼ -->
            <tr>
              {% for i in "x"|rjust:"10" %}
              <th>
                <!-- Button trigger modal -->
                <button type="button" class="btn btn4" index="{{ forloop.counter0 }}">
                  {{ dates|index_1:forloop.counter0|date:'m/d' }}
                </button>
              </th>
              {% endfor %}
            </tr>
            <!-- ì”ë””ë°­ 1~10ì¼ -->
            <tr>
              {% for i in "x"|rjust:"10" %}
              <p hidden class="level{{ level|index_1:forloop.counter0 }}">{{ name|index_1:forloop.counter0 }}</p>
              <th class="level{{ level|index_1:forloop.counter0 }}"></th>
              {% endfor %}
            </tr>
            <!-- ë‚ ì§œ 10~20ì¼ -->
            <tr>
              {% for i in "x"|rjust:"10" %}
              <th>
                <!-- Button trigger modal -->
                <button type="button" class="btn btn4" index="{{ forloop.counter0 }}">
                  {{ dates|index_2:forloop.counter0|date:'m/d' }}
                </button>
              </th>
              {% endfor %}
            </tr>
            <!-- ì”ë””ë°­ 10~20ì¼ -->
            <tr>
              {% for i in "x"|rjust:"10" %}
              <p hidden class="level{{ level|index_2:forloop.counter0 }}">{{ name|index_2:forloop.counter0 }}</p>
              <th class="level{{ level|index_2:forloop.counter0 }}"></th>
              {% endfor %}
            </tr>
            <!-- ë‚ ì§œ 20~30ì¼ -->
            <tr>
              {% for i in "x"|rjust:"10" %}
              <th>
                <!-- Button trigger modal -->
                <button type="button" class="btn btn4" index="{{ forloop.counter0 }}">
                  {{ dates|index_3:forloop.counter0|date:'m/d' }}
                </button>
              </th>
              {% endfor %}
            </tr>
            <!-- ì”ë””ë°­ 20~30ì¼ -->
            <tr>
              {% for i in "x"|rjust:"10" %}
              <p hidden class="level{{ level|index_3:forloop.counter0 }}">{{ name|index_3:forloop.counter0 }}</p>
              <th class="level{{ level|index_3:forloop.counter0 }}"></th>
              {% endfor %}
            </tr>
          </thead>
        </table>
      </article>
      <article id="tab2" class="content-container__content">
        <!-- <div class="psn_top">
          <h1 class="text_center">{{ goal.name }}</h1>
          <h3 class="text_center">í•˜ë£¨ {{ goal.goal_page }}í˜ì´ì§€ ë…ì„œí•˜ê¸°</h3>
        </div> -->
        {% if 30 >= start_days %}
        <div class="psn_boxes">
          <div class="psn_box start">
            ì‹œì‘<br><span class="psn_day">{{ start_days }}</span><br>ì¼ì§¸
          </div>
          <div class="psn_box continuity">
            ì—°ì†<br><span class="psn_day">{{ continuity_days }}</span><br>ì¼ì§¸
          </div>
          <div class="psn_box success">
            ì„±ê³µ<br><span class="psn_day">{{ success_days }}</span><br>ì¼ì§¸
          </div>
        </div>
        {% else %}
        <div class="psn_boxes">
          <h2>{{dates|index_1:0}} ~ {{dates|index_1:29}}</h2>
        </div>
        {% endif %}
        <div class="psn_check table_container">
          <table>
            <thead>
              <!-- ë‚ ì§œ 1~10ì¼ -->
              <tr>
                {% for i in "x"|rjust:"10" %}
                <th>{{ dates|index_1:forloop.counter0|date:'m/d' }}</th>
                {% endfor %}
              </tr>
              <!-- ì¸ì¦ 1~10ì¼ -->
              <tr>
                {% for i in "x"|rjust:"10" %}
                {% if achievements|index_1:forloop.counter0 == True %}
                <th><i class="fas fa-star light"></i></th>
                {% elif achievements|index_1:forloop.counter0 == False %}
                <th><i class="fas fa-star grey"></i></th>
                {% else %}
                <th> </th>
                {% endif %}
                {% endfor %}
              </tr>
              <!-- ë‚ ì§œ 10~20ì¼ -->
              <tr>
                {% for i in "x"|rjust:"10" %}
                <th>{{ dates|index_2:forloop.counter0|date:'m/d' }}</th>
                {% endfor %}
              </tr>
              <!-- ì¸ì¦ 10~20ì¼ -->
              <tr>
                {% for i in "x"|rjust:"10" %}
                {% if achievements|index_2:forloop.counter0 == True %}
                <th><i class="fas fa-star light"></i></th>
                {% elif achievements|index_2:forloop.counter0 == False %}
                <th><i class="fas fa-star grey"></i></th>
                {% else %}
                <th> </th>
                {% endif %}
                {% endfor %}
              </tr>
              <!-- ë‚ ì§œ 20~30ì¼ -->
              <tr>
                {% for i in "x"|rjust:"10" %}
                <th>{{ dates|index_3:forloop.counter0|date:'m/d' }}</th>
                {% endfor %}
              </tr>
              <!-- ì¸ì¦ 20~30ì¼ -->
              <tr>
                {% for i in "x"|rjust:"10" %}
                {% if achievements|index_3:forloop.counter0 == True %}
                <th><i class="fas fa-star light"></i></th>
                {% elif achievements|index_3:forloop.counter0 == False %}
                <th><i class="fas fa-star grey"></i></th>
                {% else %}
                <th> </th>
                {% endif %}
                {% endfor %}
              </tr>
            </thead>
          </table>
        </div>
      </article>
      <article id="tab3" class="content-container__content certify_container">
        <ul class="certify_list member">
          <li><i class="fas fa-crown"></i> ë§¤ë‹ˆì €<span>{{goal.manager}}</span></li>
          <li><i class="fas fa-user-circle"></i> íŒ€ì›
            <span>
              {% for member in goal.member.all %}
              {% if request.user == goal.manager %}
              <a href="{% url 'groups:delete_member' goal.id member.id %}" class="a_deco"
                onclick="return confirm('ì •ë§ë¡œ íŒ€ì›ì€ í‡´ì¥ì‹œí‚¤ê² ìŠµë‹ˆê¹Œ?ğŸ˜¥')">&nbsp;&nbsp;{{member}}</a>
              {% else %}
              {{member}}
              {% endif %}
              {% endfor %}
            </span>
          </li>
          <li>
            í‡´ì¥ì‹œí‚¤ê³  ì‹¶ì€ íŒ€ì›ì„ í´ë¦­í•´ì£¼ì„¸ìš”! ë§¤ë‹ˆì €ë§Œ íŒ€ì›ì„ í‡´ì¥ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
          </li>
        </ul>
        {% for certify in certifies %}
        <ul class="certify_list">
          <li>ì•„ì´ë””<span>{{ certify.user }}</span></li>
          <li>ì¸ì¦ë‚ ì§œ<span>{{ certify.created }}</span></li>
          {% if goal.certify_method == 'image' %}
          {% if certify.image %}
          <img src="{{ certify.image.url }}" alt="image" width=auto height="200px">
          {% endif %}
          {% elif goal.certify_method == 'text' %}
          <li>ì¸ì¦ë‚´ìš©<span>{{ certify.text }}</span></li>
          {% else %}
          <li>ì¸ì¦ìˆ˜ì¹˜<span>{{ certify.value }}</span></li>
          {% endif %}
        </ul>
        {% endfor %}
      </article>
    </section>
  </div>

  {% if 30 >= start_days %}
  <div class="goal_verify">
    <a class="btn1" href="{% url 'groups:certify' goal.id %}">ì¸ì¦í•˜ê¸°</a>
  </div>
  {% endif %}

  <!-- The Modal -->
  <div id="myModal" class="modal">
    <!-- Modal content -->
    <div class="modal-container">
      <span class="close"><i class="fas fa-times"></i></span>
      <div class="modal-content">
        <h4 class="modal-title" id="exampleModalLabel">ì„±ê³µ ì¸ì›</h4>
        <div class="modal-body">
          <th>{{ name|index_1:0 }}</th>
        </div>
      </div>
    </div>
  </div>
</section>

<script src="{% static 'js/group_main.js' %}"></script>
<script src="{% static 'js/main.js' %}"></script>
{% endblock %}